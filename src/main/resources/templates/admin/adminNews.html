<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{default}">
    <head>
        <title>Admin ประกาศ</title>
    </head>
    <body>
        <div layout:fragment="content">

            <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

            <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

            <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css" rel="stylesheet">
            <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>




            <h2>นี้คือ หน้าประกาศ</h2>
            <div class="alert alert-success" role="alert" th:text="${message}" th:if="${message != null}" >
                message
            </div>
            <form th:action="@{/admin/news}" method="post" id="editNewsForm">
                <h1 class="h3 mb-3 font-weight-normal">แก้ไขข้อมูล ประกาศ</h1>
                <div class="form-group">
                    <label>ประกาศ</label>
                    <div id="summernote"></div>
                </div>
                <input type="hidden" name="msg" th:value="${news.msg}">
                <button class="btn btn-lg btn-primary btn-block" type="button" id="submitNews">แก้ไข</button>
            </form>

            <script>
              $('#summernote').summernote({
                placeholder: 'กรอกข้อมูลประกาศที่นี้',
                tabsize: 2,
                height: 400
              });

              $('#summernote').summernote('pasteHTML', $('input[name="msg"]').val());

            $( "#submitNews" ).click(function() {
                var markupStr = $('.note-editable').html();
                $('input[name="msg"]').attr('value',markupStr);
                console.log($('input[name="msg"]').val());
                $( "#editNewsForm" ).submit();
            });
            </script>
        </div>
    </body>

</html>